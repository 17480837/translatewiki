#!/bin/sh
set -e
umask 0002

WIKI=/www/translatewiki.net/w

for PROJECT in \
blockly \
commons-android \
commons-ios \
eol \
etherpad-lite \
freecol \
fudforum \
fuel \
ihris \
intuition \
jquery.uls \
kiwix \
mantis \
mathjax \
mifos \
mwlib \
okawix \
osm \
pywikibot \
shapado \
vicuna \
waymarked-trails-site \
wikia \
wikiblame \
WikipediaMobile \
WikipediaMobileJ2ME \
wikireader \
WikisourceMobile \
WiktionaryMobile \
WLMMobile
do
	echo "Updating ${PROJECT}..."
	/home/betawiki/config/bin/repo update "$PROJECT" && echo "$PROJECT done!" &
done
wait
echo "All projects updated!"
/home/betawiki/config/bin/createmi
wait
php $WIKI/extensions/Translate/scripts/processMessageChanges.php
echo "Really. Go to https://translatewiki.net/wiki/Special:ManageMessageGroups for the last bits"
