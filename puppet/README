== Manual steps ==

* From a clean server, do this:

Add to /etc/network/interfaces:
---
iface eth0 inet6 static
 address 2a03:4000:6:55::1
 netmask 64

auto eth0:1
iface eth0:1 inet6 static
 address 2a03:4000:6:55::2
 netmask 64
---
Reboot the machine enabled the IP configuration.
------------------

apt-get update
apt-get dist-upgrade
apt-get install -y git puppet make
cd /root
git clone https://gerrit.wikimedia.org/r/translatewiki
cd /root/translatewiki
git submodule init
git submodule update
cd puppet
make apply
# Run puppet again to fix some execution order/dependency issues
make apply
# Run puppet a third time to fix some execution order/dependency issues
make apply
------------------
mkdir /etc/webauth
------------------
for module in 'YAML::Syck' 'PHP::Serialization' 'File::Slurp'; do cpanp -i $module; done
------------------
Install phpunit

Go to mediawiki/tests/phpunit
 sudo sh install-phpunit.sh

------------------

Install wikidiff and FastStringSearch

cd /www/translatewiki.net/w/extensions/wikidiff2
b phpize
b ./configure
b make
sudo make install

Create /etc/php5/conf.d/20-wikidiff2.ini:
  extension=wikidiff2.so

Adapt the same for FastStringSearch which is located at
https://gerrit.wikimedia.org/r/mediawiki/php/FastStringSearch

And restart php5-fpm if needed.
-----------------------
Put backup keys in /root/.ssh/
-----------------------

TODO:
* puppet: add IPv6 config changes to /etc/network/interfaces
* puppet: Warning: Config file /etc/puppet/hiera.yaml not found, using Hiera defaults
* puppet: Update /etc/default/locale to LANG="en_US.UTF-8"
* puppet: Install nginx before lists
