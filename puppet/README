== Manual steps ==

* From a clean server, do this:
apt-get update
apt-get dist-upgrade
apt-get install -y git puppet make
cd root
git clone https://gerrit.wikimedia.org/r/translatewiki
* Create a user and an authorized_keys file for that user
* User must have sudo rights (see sudo module)
* Execute:
cd /root/translatewiki/puppet
make test
make noop
make apply

------------------
Create /etc/webauth

------------------

Install syck_load

Follow instructions at https://github.com/example42/puppet-php
Create /etc/php5/conf.d/20-syck.ini:
  extension=syck.so

And restart php5-fpm


------------------

for module in 'YAML::Syck' 'PHP::Serialization' 'File::Slurp'; do cpanp -i $module; done

------------------

Install wikidiff and FastStringSearch

cd /www/translatewiki.net/w/extensions/wikidiff2
b phpize
b ./configure
b make
sudo make install

Create /etc/php5/conf.d/20-wikidiff2.ini:
  extension=wikidiff2.so

Adapt the same for FastStringSearch which is located at
https://gerrit.wikimedia.org/r/mediawiki/php/FastStringSearch

And restart php5-fpm if needed.

------------------

Add to /etc/network/interfaces:
---
iface eth0 inet6 static
 address 2a03:4000:6:55::1
 netmask 64

 up ip -6 ro add 2a03:4000:6:55::2 dev eth0
 up ip -6 ro add default via 2a03:4000:6:55::1 dev eth0
 up ip -6 addr add 2a03:4000:6:55::2/64 dev eth0
---
Restart enable the IPv6 addresses:
/etc/init.d/networking restart

------------------

Install phpunit (distro version too old)

Go to mediawiki/tests/phpunit
 sudo sh install-phpunit.sh
